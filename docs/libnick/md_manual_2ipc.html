<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libnick: Performing Inter-Process Communication</title>
<link rel="icon" href="libnick-r.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libnick<span id="projectnumber">&#160;2025.7.3</span>
   </div>
   <div id="projectbrief">A cross-platform base for native Nickvision applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Performing Inter-Process Communication </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md2"></a></p>
<p>libnick uses named-pipes on Windows and Unix Domain Sockets on Linux and macOS to establish inter process server and client communicators, while abstracting all of that away from the consumer in the easy to use <span class="tt">Nickvision::App::InterProcessCommunicator</span> API.</p>
<p>Upon creating an <span class="tt">Nickvision::App::InterProcessCommunicator</span> object, either <span class="tt">isServer()</span> or <span class="tt">isClient()</span> will return true depending on whether or not this instance is a server or client respectively. Server instances should register a callback to the <span class="tt">CommandReceived</span> event to be invoked when clients send commands to the server.</p>
<p>NOTE: Server instance of <span class="tt">Nickvision::App::InterProcessCommunicator</span> should be kept alive for the entire need for the communicator. This includes when the need to receive client messages is present.</p>
<p>Let's consider an example scenario for using the <span class="tt">Nickvision::App::InterProcessCommunicator</span>. Assume we have an application where we want the first instance to be considered the main, running instance. Assume that if other instances of said application are started, we want its arguments to be passed to the main instance and then have said other instances be closed. This will allow, for example, a GUI main instance to be manipulated via secondary CLI instances.</p>
<p>Here's the code for this: </p><div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_nickvision_1_1_app.html">Nickvision::App</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_nickvision_1_1_events.html">Nickvision::Events</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>*[] argv)</div>
<div class="line">{</div>
<div class="line">    std::vector&lt;std::string&gt; modernArgs;</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; argc; i++)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(argv[i])</div>
<div class="line">        {</div>
<div class="line">            modernArgs.push_back({ argv[i] });</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    InterProcessCommunicator&amp; ipc{ <span class="stringliteral">&quot;appid&quot;</span> };</div>
<div class="line">    ipc.commandReceived() += handleArguments;</div>
<div class="line">    ipc.communicate(modernArgs, <span class="keyword">true</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> handleArguments(<span class="keyword">const</span> <a class="code hl_class" href="class_nickvision_1_1_events_1_1_param_event_args.html">ParamEventArgs</a>&lt;std::vector&lt;std::string&gt;&gt;&amp; args)</div>
<div class="line">{</div>
<div class="line">  ...</div>
<div class="line">}</div>
<div class="ttc" id="aclass_nickvision_1_1_events_1_1_param_event_args_html"><div class="ttname"><a href="class_nickvision_1_1_events_1_1_param_event_args.html">Nickvision::Events::ParamEventArgs</a></div><div class="ttdoc">An event argument that contains a single parameter.</div><div class="ttdef"><b>Definition</b> parameventargs.h:37</div></div>
<div class="ttc" id="anamespace_nickvision_1_1_app_html"><div class="ttname"><a href="namespace_nickvision_1_1_app.html">Nickvision::App</a></div><div class="ttdef"><b>Definition</b> appinfo.h:32</div></div>
<div class="ttc" id="anamespace_nickvision_1_1_events_html"><div class="ttname"><a href="namespace_nickvision_1_1_events.html">Nickvision::Events</a></div><div class="ttdef"><b>Definition</b> event.h:34</div></div>
</div><!-- fragment --><p> If this program is ran for the first time, <span class="tt">ipc</span> will be the server instance. The <span class="tt">handleArguments</span> function will be invoked after <span class="tt">communicate</span> with its own arguments, as <span class="tt">communicate</span> still invokes <span class="tt">CommandReceived</span> even if ipc is the server instance.</p>
<p>If this program is ran <em>not</em> for the first time, its arguments will be sent to the first instance and this instance itself will close (as <span class="tt">true</span> was passed as the second argument of <span class="tt">communicate</span>). The first instance's <span class="tt">handleArguments</span> function will be called as a result of <span class="tt">CommandReceived</span> being invoked by the ipc server receiving the command. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
